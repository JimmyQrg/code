<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-Language Online IDE</title>
<style>
body {
    font-family: 'Courier New', monospace;
    background-color: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
}
textarea {
    width: 90%;
    height: 300px;
    background-color: #2e2e2e;
    color: #fff;
    border: 1px solid #555;
    padding: 10px;
    font-family: monospace;
    font-size: 14px;
    resize: vertical;
}
select, button {
    margin: 10px;
    padding: 10px;
    font-size: 16px;
}
pre {
    width: 90%;
    background-color: #2e2e2e;
    padding: 10px;
    border: 1px solid #555;
    overflow-x: auto;
}
</style>
</head>
<body>

<h1>Multi-Language Online IDE</h1>

<select id="language">
    <option value="python3">Python 3</option>
    <option value="cpp">C++</option>
    <option value="c">C</option>
    <option value="csharp">C#</option>
    <option value="java">Java</option>
    <option value="html">HTML</option>
    <option value="javascript">JavaScript</option>
    <option value="ruby">Ruby</option>
    <option value="go">Go</option>
    <option value="php">PHP</option>
    <option value="swift">Swift</option>
    <option value="rust">Rust</option>
    <option value="kotlin">Kotlin</option>
</select>

<button onclick="runCode()">Run</button>
<button onclick="downloadCode()">Download</button>

<textarea id="code" placeholder="Write your code here..."></textarea>

<h2>Output:</h2>
<pre id="output"></pre>

<script>
async function runCode() {
    const language = document.getElementById('language').value;
    const code = document.getElementById('code').value;
    const outputEl = document.getElementById('output');
    outputEl.textContent = "Running...";

    try {
        const response = await fetch('https://emkc.org/api/v2/piston/execute', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ language: language, source: code })
        });
        const data = await response.json();
        outputEl.textContent = data.output || "No output";
    } catch (err) {
        outputEl.textContent = "Error: " + err.message;
    }
}

function downloadCode() {
    const code = document.getElementById('code').value;
    const lang = document.getElementById('language').value;
    const blob = new Blob([code], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `code.${getExtension(lang)}`;
    a.click();
    URL.revokeObjectURL(url);
}

function getExtension(lang) {
    const map = {
        python3: "py",
        cpp: "cpp",
        c: "c",
        csharp: "cs",
        java: "java",
        html: "html",
        javascript: "js",
        ruby: "rb",
        go: "go",
        php: "php",
        swift: "swift",
        rust: "rs",
        kotlin: "kt"
    };
    return map[lang] || "txt";
}
</script>

</body>
</html>
